def count_splits(grid):
    R = len(grid)
    C = len(grid[0])

    start_r = 0
    start_c = grid[0].index("S")

    beams = {(start_r + 1, start_c)}
    visited = set()
    splits = 0

    while beams:
        new_beams = set()

        for r, c in beams:
            if not (0 <= r < R and 0 <= c < C):
                continue
            if (r, c) in visited:
                continue
            visited.add((r, c))

            cell = grid[r][c]

            if cell == "." or cell == "S":
                new_beams.add((r + 1, c))
            elif cell == "^":
                splits += 1
                new_beams.add((r, c - 1))
                new_beams.add((r, c + 1))

        beams = new_beams

    return splits


# ğŸ”½ PASTE YOUR PUZZLE INPUT HERE ğŸ”½
raw = """
......................................................................S......................................................................
.............................................................................................................................................
......................................................................^......................................................................
.............................................................................................................................................
.....................................................................^.^.....................................................................
.............................................................................................................................................
....................................................................^.^.^....................................................................
.............................................................................................................................................
...................................................................^.^...^...................................................................
.............................................................................................................................................
..................................................................^.......^..................................................................
.............................................................................................................................................
.................................................................^.^.^.^...^.................................................................
.............................................................................................................................................
................................................................^.^.^.^.^.^.^................................................................
.............................................................................................................................................
...............................................................^.^.^.^.....^.^...............................................................
.............................................................................................................................................
..............................................................^.^.^.^.^...^.^.^..............................................................
.............................................................................................................................................
.............................................................^...^...^.^.^.^.^.^.............................................................
.............................................................................................................................................
............................................................^.^.^.^.^...^...^.^.^............................................................
.............................................................................................................................................
...........................................................^.^...^.^.^...^.^...^.^...........................................................
.............................................................................................................................................
..........................................................^.^.^...^.^.^...^.^.....^..........................................................
.............................................................................................................................................
.........................................................^.^.^.^.^.^...^...^.^.^...^.........................................................
.............................................................................................................................................
........................................................^.^.^.^.^...^.^...^.^...^.^.^........................................................
.............................................................................................................................................
.......................................................^.^.....^.^...^.^...^.^.^.^...^.......................................................
.............................................................................................................................................
......................................................^.^...^.^...^...^.^.^.^...^...^.^......................................................
.............................................................................................................................................
.....................................................^.^.^.^.^...^...^.^.^.^.^...^.^.^.^.....................................................
.............................................................................................................................................
....................................................^...^.^.^.........^.^...^...^...^.^.^....................................................
.............................................................................................................................................
...................................................^...^.^.^.^.......^...^.^...^.^.^...^.^...................................................
.............................................................................................................................................
..................................................^.^.^.....^.^.^.^.^.^.^.^.^...^.^.^...^.^..................................................
.............................................................................................................................................
.................................................^.....^...^.^.^.^.^.....^.^.^...^.....^...^.................................................
.............................................................................................................................................
................................................^.^.^.^.^.^...^.^.^.^...^.^.^.^.^.^.^.^.^.^.^................................................
.............................................................................................................................................
...............................................^.^.^.^.^.^...^.^...^.....^.....^.^...^.....^.^...............................................
.............................................................................................................................................
..............................................^.^.^...^...^.^.^.^.^.^...^.^.^.^.^.^...^...^.^.^..............................................
.............................................................................................................................................
.............................................^.^...^.^...^.^...^.....^...^.^.^.^.^.^...^.^.^.^.^.............................................
.............................................................................................................................................
............................................^.^...^.^...^.^.^.^.^...^.^.^...^.^...^...^...^.^.^.^............................................
.............................................................................................................................................
...........................................^.^.....^...^.^.^...^.^...^.^.^...^.^.............^...^...........................................
.............................................................................................................................................
..........................................^...^...^.^.^.^.....^.^.^.^.^.^.^...^...^.^...^...^.^.^.^..........................................
.............................................................................................................................................
.........................................^.^...^.^.^.^.^.....^.^.^.....^...^...^...^.^.^.^.....^.^.^.........................................
.............................................................................................................................................
........................................^.^...^.^.^.^.^.^.^.^.^.....^.....^.^.^...^.^.^.^.....^.^...^........................................
.............................................................................................................................................
.......................................^...^.^.^.^.^.^...^.^.^.^.^.^...^...^...^.^.........^.......^.^.......................................
.............................................................................................................................................
......................................^.^.^.^.^.^.^.^.^.^.^.^.^.......^.^.^.^.^.^.^.^.^.^...^.^.^...^.^......................................
.............................................................................................................................................
.....................................^...^.......^.^.....^...^.^.^.^.^...^.^.^.^.........^...^...^.^.^.^.....................................
.............................................................................................................................................
....................................^...^.^.^.^.^.^.^.....^.^...^...^.^.^.^.^.^...^.^.^.^.^.^.^.^...^.^.^....................................
.............................................................................................................................................
...................................^.^.^.^.^...^.^.^.^.^.^...^.^.^.....^.^...^.^...^.....^.....^.^...^.^.^...................................
.............................................................................................................................................
..................................^.^.^...^...^.^.^...^.^.^.^.^.^.^.^.^.^...^.^.^.^.^...^.^.....^.^.^.^.^.^..................................
.............................................................................................................................................
.................................^.^.^.^.^...^.^.^.^.^...^.........^.^.^...^...^.....^.....^...^...^.^...^.^.................................
.............................................................................................................................................
................................^.....^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.....^.^.^.^.^.^.^.^.^................................
.............................................................................................................................................
...............................^.^.^.^...^.^.^...^.....^.^.^.^.^.^...^.^.^.....^.^.^.^.^.^.^.^.^.^.^.....^...^...............................
.............................................................................................................................................
..............................^...^.^...^.^.^.....^...^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^...^.^...^.^.^.^.^...^..............................
.............................................................................................................................................
.............................^.....^.^.^...^.^.^.^.^...^.^.^...^.^...^.^.^.^.^.^...^...^...^.^.^...^.^.^.^.^.^.^.............................
.............................................................................................................................................
............................^.^.^.^...^.^.^.^.^.^.^...^.^.....^.....^.^.^.^.^.^...^.^...^.^...^.^.....^.^.^.^.^.^............................
.............................................................................................................................................
...........................^.^...^.^.^...^.^.^.^.^.^.^.^.^.....^.^.^...^.....^...^...^.^...^.^.^.^.^.^...^...^...^...........................
.............................................................................................................................................
..........................^.^.^.^...^.....^...^.^.^.^...^.^.^.^.^.^...^.^.^.^.^...^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.^..........................
.............................................................................................................................................
.........................^.^.^.^...^.^.^.....^.^.^...^.....^.^.^.^.^.^...^.^.....^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.^.........................
.............................................................................................................................................
........................^.^.^.^...^.^.^.^.^...^...^.^...^.^.^...^...^.^.^.^.^...^.....^.^.^.^.^.^.^.^.^.^.....^.^.^.^........................
.............................................................................................................................................
.......................^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^...^.^...^...^.^.^...^.^.^.......^.^.^...^.....^.^.^.^.......................
.............................................................................................................................................
......................^.^.......^.^.^.^...^...........^.^.^.^.^.^.^.^...^.^.^.^.^.^.^...^...^.^.^.^.^.^.^.^.^.^.......^......................
.............................................................................................................................................
.....................^.^.........^.^...^.^.^.^.^.^.^.^.^...^.....^.^.^.........^.^.^.^.^...^.^.^...^...^...^.^.^.^.^.^.^.....................
.............................................................................................................................................
....................^.^...^...^.^.^.^.^.^.^...^.^.^.^.^.^.^...^.^.^.^.^...^...^.^...^...^.....^...^.^.^.^.^.^.......^.^.^....................
.............................................................................................................................................
...................^.^.^.^.^...^.^.^.^.^.^.^.^.^...^.^.....^.^.^.^.^.^.........^...^.^.^.^.^.^.^.^.^.^...^.^.^.....^.^.^.^...................
.............................................................................................................................................
..................^.^.^...^...^.^.^.^...^.^...^.^.^.^.^.^.^.^.^...^.^...^.^...^.^.^.^.^.^...^...^.^.^.^.^.^.^.^.^...^...^.^..................
.............................................................................................................................................
.................^.....^.....^.^.^.^.^...^...^.^...^...^.^.^.^.^.....^.^.^...^.....^.^.^.^.^...^.^.^.....^...^.^...^.^.^.^.^.................
.............................................................................................................................................
................^...^.^.^...^.^.^...^.^.^.^.^.^.^.^.^.^.^...^.....^.^.^...^.^...........^.^.^.^.^...^.^.^.^.^.^.^.^.^...^...^................
.............................................................................................................................................
...............^.^.....^.^...^.^.^.....^.^.^.^.^.^.^.^.^.........^.^.^.^.^.^...^...^...^...^.^.^...^.^.^.^.^.^.^.^.^...^.^.^.^...............
.............................................................................................................................................
..............^...^.....^.^.^.^...^.^...^.....^...^.^.^.^.^...^.^.^.^.^.^.^.^.....^...^.^.^.^...^.^.^.^.^.^...^...^.^.^...^.^.^..............
.............................................................................................................................................
.............^.^...^.^.^.^.^.^.^.^...^...^.^.^.^...^.^.^...^.^...^...^.^.^.......^.^...^.^...^.^.^.^.^.^.^.^.^.^.^.....^...^.^.^.............
.............................................................................................................................................
............^...^.^...^.^.^...^...^...^.^.^.^.^.^.....^.^.^.^.^...^.^.....^.......^...^.^.^.^.^...^.^.....^.^...^.^.^.^.^.^.^.^.^............
.............................................................................................................................................
...........^.^.^...^.^.^.^...^.^...^.^.....^.^.^.^.^.^.^.....^...^.^.......^.^...^...^.^.^.^...^.^.^.^...^.^.^...^.^...^.^...^...^...........
.............................................................................................................................................
..........^.^.^.^.^...^.....^...^.^.^...^.^...^.^.^...^.^...^.^...^.^.^.^.....^.......^.^.^.^.^...^.^.^.^.^...^.^...........^.^.^.^..........
.............................................................................................................................................
.........^.^...^.^.^.^.^.^.....^.....^.^.......^.^.^.^.^.^.^...^.^.^.....^.^.^.^.^.......^.......^.^.^.^.^.^...^.^...^.^.^.^.^...^.^.........
.............................................................................................................................................
........^...^.^.^...^.^.....^...^.....^.^.^.....^.^...^...^...^.^.^.^.^...^.^.^.^...^.^.^...^...^.^...^.....^.^.^.^.........^.^...^.^........
.............................................................................................................................................
.......^.^...^.^.^.^.^.^.^...^.^.....^.^.^.^.^...^.^.^.^.^.^.^.^...^.^.^...^.^.^.^.^.^.....^.^.^.^...^.......^...^.^.^.^.......^...^.^.......
.............................................................................................................................................
......^.^.....^.....^.^.^.^...^.^.^.^...^.^...^.^...^.^.^.^.^.^.^.^...^.^.^...^.^...^.....^.^...^.....^.^.^.^...^.^.^.^.^.^...^...^.^.^......
.............................................................................................................................................
.....^.^.^.^...^...^.......^...^.^.^.^.^.^.^.^.^.^...^.^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.^.......^.^.^.^.^.^.^.....^.^.^.^.....^.^.^.^.^.^.....
.............................................................................................................................................
....^.^.^...^.^.^.^.^.^...^.^.^.^.^.^.......^...^.^.^...^.^.^.^...^.^...^.^.......^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^.^...^.^.^.....^.^...^....
.............................................................................................................................................
...^.^.^.^.^.^...^.^.^...^.^.^.^.^.^.^.^.^.^.^.......^.^.^.^...^.^.^.^.^.^...^.^...^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.^...^.....^.....^.^.^.^...
.............................................................................................................................................
..^.^.^.^.^...........^...^.^...^.^.^.^.^...^...^.....^.^.^.....^.^.^.^...^.....^.....^.^.^...^.^.^.^.....^.^.^...^.^.^...^...^.^.^.^...^.^..
.............................................................................................................................................
.^...^.^.^.^.....^...^...^...^.....^.....^...^.^.^.....^.^.^.^.^...^.^.^.^.^...^.^...^.^.^.^...^.^...^.^...^.^.^.^.^.^.^.^.^.^.^...^...^.^.^.
.............................................................................................................................................
""".strip().split("\n")

print("Answer:", count_splits(raw))
